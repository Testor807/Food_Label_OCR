<!DOCTYPE html>
<html lang="en">
<script tpye="javascript">
</script>
<head>
    <title>Suggestion1</title>
    <script type="text/javascript" src="{{url_for('static', filename='jslib/jquery-1.11.1.js')}}"></script>
    <!-- CSS only -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
		<script type="text/javascript" src="script.js"></script>
        <style>
            body {
                background-image: url(/static/background/bg3.jpg);
                background-position: center center;
                background-size: auto;
                background-attachment: fixed;
            }
    
            .nav-item {
                border-right: 1px solid #a9a9ad;
                margin-right: 15;
                margin-left: 15;
            }
    
            .container {
                margin-top: 50px;
                margin-bottom: 50px;
                padding-bottom: 2px;
                background-color: rgb(255, 255, 255);
                border: 1px  transparent;
                backdrop-filter: blur(1rem);
                box-shadow: 1.3rem 1.3rem 1.3rem rgba(0,0 ,0 , 0.5);
            }
        </style>
</head>

<body>
    <nav class="navbar navbar-expand-sm navbar-dark bg-dark ">

        <a class="navbar-brand h1 mb-0  text-white" href="/premium_scan">
            <h2>Nutrition Scanner</h2>
        </a>
    </nav>
    <nav class="navbar navbar-expand-sm navbar-dark custom " style="background-color:rgba(78, 75, 75, 0.534);">
        <button type="button" data-toggle="collapse" data-taget="#navbarNav" class="navbar-toggler"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end mt-1" id="navbarNav">

            <ul class="navbar-nav mr-auto" id="">

                <li class="nav-item">
                    <a href="/premium_scan" class="nav-link align-middle text-white active">
                        <i class="fa fa-home "></i> <span class="ms-1 d-none d-md-inline ">Scan</span>
                    </a>
                </li>

                <li class="nav-item dropdown">
                    <a href="#" data-bs-toggle="dropdown" class="nav-link dropdown-triggle text-white "
                        id="navbarDropdown" role="button" aria-expanded="false">
                        <i class="	fa fa-files-o "><span class="ms-1 d-none d-sm-inline">Account
                                Management</span></i>
                    </a>
                    <ul class="dropdown-menu bg-dark " aria-labelledby="navbarDropdown">
                        <li class="w-100">
                            <a href="/edit" class="dropdown-item text-white">
                                <image src="{{url_for('static', filename='icon/folder-modified.png')}}"
                                    style="width: 16px; height: 16px;"></image><span class="d-none d-sm-inline">Account
                                    Information</span></i>
                            </a>
                        </li>
                        <li class="w-100">
                            <a href="#" class="dropdown-item text-white" onclick="showMessage()">
                                <image src="{{url_for('static', filename='icon/block-user-modified.png')}}"
                                    style="width: 16px; height: 16px;"></image><span class="d-none d-sm-inline">Delete
                                    Account</span>
                            </a>
                        </li>
                    </ul>
                </li>

                <li class="nav-item dropdown">
                    <a href="#" data-bs-toggle="dropdown" class="nav-link dropdown-triggle text-white"
                        id="navbarDropdown2" role="button" aria-expanded="false">
                        <i class="	fa fa-files-o "><span class="ms-1 d-none d-sm-inline">Previous Scanned Records
                                Management</span></i>
                    </a>
                    <ul class="dropdown-menu bg-dark " aria-labelledby="navbarDropdown2">
                        <li class="">
                            <a href="/review" class="dropdown-item  text-white">
                                <image src="{{url_for('static', filename='icon/folder-modified.png')}}"
                                    style="width: 16px; height: 16px;"></image><span class="d-none d-sm-inline">Check
                                    Past Records</span>
                            </a>
                        </li>
                        <li class="">
                            <a href="/searchRecord" class="dropdown-item   text-white">
                                <image src="{{url_for('static', filename='icon/folder-modified.png')}}"
                                    style="width: 16px; height: 16px;"></image><span id="delR"
                                    class="d-none d-sm-inline">Search Previous Scanned Records</span>
                            </a>
                        </li>
                        <li class="">
                            <a href="/suggestion" class="dropdown-item  text-white">
                                <image src="{{url_for('static', filename='icon/report-modified.png')}}"
                                    style="width: 16px; height: 16px;"></image><span class="d-none d-sm-inline">Generate
                                    Eating habits Suggestion</span>
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a href="/exercise" class="nav-link text-white">
                        <image src="{{url_for('static', filename='icon/sports-modified.png')}}"
                            style="width: 16px; height: 16px;"></image><span class="d-none d-sm-inline">Records
                            Exercise</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/map_p" class="nav-link align-middle  text-white">
                        <i class="fa fa-usd "></i> <span class="ms-1 d-none d-md-inline ">Healthy shopping</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/responeProblem" class="nav-link align-middle  text-white">
                        <image src="{{url_for('static', filename='icon/writing-mody.png')}}"
                            style="width: 16px; height: 16px;"></image><span class="ms-1 d-none d-md-inline ">Response
                            Scanning problem</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/logout" class="nav-link align-middle  text-white">
                        <i class="fa fa-sign-out "></i> <span class="ms-1 d-none d-md-inline ">Logout</span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>
	
	<div class="container rounded ">
        <h1 style="text-align: center;">Previous Records</h1>
    
    <div style="display: grid;grid-template-columns: repeat(2, 1fr); ">
	<hr style="grid-column-start:1;grid-column-end:3 ">
    <div style="margin-left: auto;margin-right: auto;" class="text-center" id="Exercise Records">
        <table class="table table-striped table-sm" style="margin-left: auto;margin-right: auto;">
            <thead>
                <tr>
                    
                    <th scope="col">Exercise type</th>
                    <th scope="col">Time</th>
                    <th scope="col">Burned Calorie Amount</th>
                  </tr>
            </thead>
            <tbody>
                {% for item in data %}
                <tr>
                    
                    <td>{{item[2]}}</td>
                    <td>{{item[3]}}</td>
                    <td>{{item[4]}}</td>
                </tr>
                {% endfor %}
              </tbody>
        </table>
    </div>
    <div id="Nuration Records rounded" style="margin-left: auto;margin-right: auto;">
        <table class="table table-striped table-sm text-center">
            <thead>
                <tr>
                    <th scope="col">Recent Calories Consumtion</th>  
                  </tr>
            </thead>
            <tbody>
                {% for item in ndata %}
                <tr>
                    
                    <td>{{item[0]}}</td>
                    
                </tr>
                {% endfor %}
              </tbody>
        </table>
    </div>
    <hr style="grid-column-start:1;grid-column-end:3 ">
    
    <div id="result"style="grid-column-start:1;grid-column-end:3 ;">
        <div>
            <h1 style="text-align: center;">Analysis result</h1>
        </div>
		<div id="req" style="display: none;">{{require[0]}},{{require[1]}},{{require[2]}},{{require[3]}},{{require[4]}}</div>
        <div id="nor" style="display: none;">{{normal[0]}},{{normal[1]}},{{normal[2]}},{{normal[3]}},{{normal[4]}}</div>
        <div style="display: none;"">{{gap[0]}},{{gap[1]}},{{gap[2]}},{{gap[3]}},{{gap[4]}}</div>
		<div><div><canvas id="myCanvas" width="800" height="100" style="margin:auto;" /></div>
		<div><canvas id="myChart" style="width:50%;max-width:600px;margin: auto;"></canvas></div></div>
		<div><p style="text-align:center;">*: the related data reference by Centre for Food Safety of Hong Kong.</p>
			<br>
			<div><p style="text-align: center;">Suggestion:</p>
			<table class="table-bordered" style="margin:auto;">
                <tr><td>
                    {% for str in message %}
                    {{str}}<br />
                    {% endfor %}
                </td></tr>

			</table>
            <br />
            <br />
            <br />
            </div>
        </div>
        </div>
    </div>
		<script>
		    var nu = document.getElementById("req").innerHTML;
            var ar = nu.split(",");
            var dn = document.getElementById("nor").innerHTML;
            var ar2 = dn.split(",");
		    const n = [ar[0],ar[1],ar[2],ar[3]];
            const d = new Array(5);
            if((ar2[0]) == ("null")){
                for(let i=0;i<5;i++){
                    d[i] = 0;
                }
            }else{
                for(let k=0;k<5;k++){
                    d[k] = ar2[k];
                }
            }
	var c = document.getElementById("myCanvas");
	var ctx = c.getContext("2d");
	ctx.beginPath();
	ctx.fillStyle = "green";
	ctx.fillRect(420, 10, 30, 30);
	ctx.stroke();
	ctx.beginPath();
	ctx.fillStyle =  "blue";
	ctx.fillRect(420, 60, 30, 30);
	ctx.stroke();
	ctx.font = "25px Arial";
	ctx.fillStyle = "black";
    ctx.fillText("Reqired ",450,32);
	ctx.fillText("Daily amount",450,85);
	
    var xValues = ["Calorie","Total_Fat","Sodium","Total_Carbohydrate","Protein"];
    var yValues = [ar[0],ar[1],ar[2],ar[3],ar[4]];
    var yValues2 = [d[0],d[1],d[2],d[3],d[4]];
    var barColors = "green";
    var barColors2 = "blue";

    new Chart("myChart", {
    type: "bar",
    data: {
        labels: xValues,
        datasets: [{
        backgroundColor: barColors,
        data: yValues
        },{
            backgroundColor: barColors2,
            data: yValues2
        }]
    },
    options: {
        legend: {display: false}
    }
    });

            </script>
            <script >
            function showMessage(){
                var proceed = confirm("Do you delete this account?");
                if (proceed) {
                location.href = "/delAccount";
                } else {
                    //don't proceed
                }
            }
    </script>
</body>

</html>